.. meta::
    :description: What is valohai.yaml? Make your deep learning workflows reproducible with Valohai YAML standard.

Valohai YAML
##############

Each Valohai-enabled git repository has a ``valohai.yaml`` **configuration file** that defines the runs that can be executed and what kind of REST endpoints can be automatically generated by the project. We'll cover these execution types or "steps", as we call them, in the next section.

A single configuration file can be used by multiple projects by various users, as long as the user has access to the git repository.

.. seealso::

    :doc:`Valohai YAML Standard </reference-guides/valohai-yaml/index>`

Large YAML files
--------------------

Each Project can have one ``valohai.yaml`` file. As your project grows, you might start having repetitive content in your YAML file.

We recommend using  `YAML anchors <https://yaml.org/spec/1.2/spec.html#id2765878>`_, aliases, and extensions to define and re-use repeatitive content.

.. code-block:: yaml
    :linenos:
    :emphasize-lines: 2,20

    - definitions:
        my-inputs: &my_inputs
            - name: test-set
              keep-directories: suffix
              default: s3://onboard-sample/test/*
            - name: train-set
              keep-directories: suffix
              default: s3://onboard-sample/train/*

    - step:
        name: train-model
        image: tensorflow/tensorflow:2.0.1
        command: 
          - pip install valohai-utils numpy
          - python ./train.py {parameters}
        parameters:
          - name: epoch
            default: 5
            type: integer
        inputs: *my_inputs

..